#!/usr/bin/env bash
# Define the new hosts file content

new_hosts_content=$(cat <<EOL
127.0.0.2 localhost
8.8.8.8 facebook.com
EOL
)

if [ -f "/.dockerenv" ]; then
  # Docker environment detected
  # Backup the original hosts file
  sudo cp /etc/hosts /etc/hosts.bak

  sudo sed -i 's/127.0.0.1[[:space:]]*localhost/127.0.0.2 localhost/' /etc/hosts

  grep -q "facebook.com" /etc/hosts && sudo sed -i '/facebook.com/c\8.8.8.8 facebook.com' /etc/hosts || echo "8.8.8.8 facebook.com" | sudo tee -a /etc/hosts

  echo "Configuration complete."
else
  echo "This script should be run inside a Docker container."
fi
